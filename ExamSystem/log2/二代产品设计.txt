# 在线考试系统产品——小优2.0 新增功能设计文档

## 1. 好友管理
用户可以建立好友关系，只有好友之间才能进行私聊。好友关系通过申请-同意流程建立。

**添加好友**：用户可以通过两种方式添加好友：
- 在班级成员中选择同班同学和老师添加好友
- 根据用户ID搜索用户（返回该ID对应的老师和学生），选择添加好友

**好友申请处理**：
- 发送申请：向目标用户发送好友申请
- 处理申请：接收方可以同意或拒绝申请，拒绝后直接删除申请记录
- 申请状态：申请中、已同意

**好友列表管理**：用户可以查看已建立的好友关系，管理好友列表。

## 2. 聊天系统

### 2.1 私聊功能
只有建立好友关系的用户之间才能进行私聊。

**私聊特点**：
- 基于好友关系：必须先成为好友才能私聊
- 双方平等：私聊中双方地位相同，无创建者概念
- 消息记录：保存完整的聊天历史记录

### 2.2 群聊功能
用户可以创建和参与群聊，实现多人聊天交流。

**加入群聊方式**：
- 创建者邀请：群创建者可以邀请其他用户加入群聊
- 主动申请：用户可以通过群聊ID搜索群聊，向创建者发送加群申请

**群聊管理**：
- 创建群聊：任何用户都可以创建群聊，系统分配唯一群聊ID
- 加群申请处理：群创建者可以审核并通过或拒绝加群申请
- 群聊名称：创建时设置群聊名称，便于识别
- 成员管理：动态的成员加入和退出

**群聊特点**：
- 有创建者：群聊有明确的创建者，拥有管理权限
- 多人参与：支持多个用户同时参与聊天
- 群聊ID：每个群聊有唯一标识，便于搜索和加入

### 2.3 统一消息发送
私聊和群聊采用统一的消息发送接口，简化系统设计。

**发送参数**：聊天类型（私聊/群聊）、聊天ID、发送方ID、发送方类型、消息内容

## 3. 课程管理系统

### 3.1 选课管理
学生可以申请选课，选课管理员负责审核选课申请。

**选课管理员**：在教师中设置选课管理员角色，只有选课管理员可以管理所有课程的选课审核。

**选课流程**：
- 学生申请选课：从可选课程中申请选修
- 管理员审核：选课管理员审核通过或拒绝选课申请
- 选课状态：申请中、已通过（拒绝后直接删除记录）

### 3.2 课程信息管理
扩展课程基本信息，支持更丰富的课程管理。

**课程信息扩展**：课程描述、学分、课时、开课学期、最大选课人数、课程状态（开放选课/关闭选课/已结束）

### 3.3 课程通知系统
教师可以向选课学生发布课程相关通知。

**通知管理**：
- 发布通知：教师可以发布课程通知
- 通知展示：通知标题、内容、发布时间
- 置顶功能：重要通知可以置顶显示

### 3.4 课程作业系统
教师可以发布作业，学生可以提交作业，教师可以批改作业。

**作业发布**：
- 教师发布：设置作业标题、描述、截止时间、最大分数
- 作业状态：开放提交、已截止

**作业提交**：
- 学生提交：在截止时间前提交作业内容
- 提交记录：每个学生对每个作业只能提交一次

**作业批改**：
- 教师批改：教师可以给学生作业打分并添加评语
- 批改状态：已提交、已批改、逾期提交

## 4. 用户界面整合
采用类似QQ的三栏式布局，提供统一的用户体验。

**主界面布局**：
- 左侧导航栏：固定导航功能模块（聊天、好友、课程、考试等）
- 中间列表区：根据左侧选择显示对应的列表内容
- 右侧内容区：显示详细内容或操作界面

**模块整合**：
- 聊天模块：左侧聊天列表，右侧聊天窗口
- 好友模块：左侧可选择好友列表或群聊列表，右侧显示好友详情或群聊信息
- 课程模块：左侧课程列表，右侧课程详情（包含通知、作业等选项卡）
- 考试模块：保持现有独立窗口模式

**权限控制**：基于用户角色和课程关系的权限管理体系